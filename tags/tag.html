<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Loading‚Ä¶ ¬∑ GSoC 2026</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;900&family=Roboto+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
:root{
  --c:      #1A73E8; /* overridden by JS */
  --c-lt:   #E8F0FE;
  --c-md:   rgba(26,115,232,.12);
  --c-bdr:  rgba(26,115,232,.3);
  --bg:     #F8F9FA;
  --white:  #FFFFFF;
  --border: #DADCE0;
  --text:   #202124;
  --text2:  #3C4043;
  --text3:  #5F6368;
  --text4:  #80868B;
  --shadow: 0 1px 3px rgba(60,64,67,.15),0 2px 8px rgba(60,64,67,.10);
  --shadow-h:0 4px 12px rgba(60,64,67,.20),0 8px 24px rgba(60,64,67,.12);
  --r: 12px;
}
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
html{scroll-behavior:smooth}
body{font-family:'Roboto',sans-serif;background:var(--bg);color:var(--text);min-height:100vh}

/* ‚îÄ‚îÄ TOP BAR ‚îÄ‚îÄ */
.topbar{
  background:var(--white);border-bottom:1px solid var(--border);
  padding:0 32px;display:flex;align-items:center;gap:14px;height:64px;
  position:sticky;top:0;z-index:100;
}
.back-btn{
  display:inline-flex;align-items:center;gap:6px;
  font-size:13px;font-weight:500;color:var(--c);
  background:var(--c-lt);border:1px solid var(--c-bdr);
  border-radius:100px;padding:7px 16px;text-decoration:none;
  transition:all .15s;
}
.back-btn:hover{background:var(--c);color:white}
.topbar-crumb{font-size:13px;color:var(--text4);display:flex;align-items:center;gap:6px}
.topbar-crumb b{color:var(--text2);font-weight:500}
.topbar-count{
  margin-left:auto;
  background:var(--c-lt);color:var(--c);
  font-size:12px;font-weight:500;font-family:'Roboto Mono',monospace;
  padding:4px 12px;border-radius:100px;
}

/* ‚îÄ‚îÄ HERO ‚îÄ‚îÄ */
.hero{
  background:var(--white);border-bottom:1px solid var(--border);
  padding:0;overflow:hidden;
}
.hero-color-bar{height:6px;background:var(--c);width:100%}
.hero-inner{
  max-width:1200px;margin:0 auto;
  padding:36px 32px 40px;
  display:grid;grid-template-columns:1fr auto;gap:40px;align-items:start;
}
.hero-tag{
  display:inline-flex;align-items:center;gap:8px;
  background:var(--c-lt);border:1px solid var(--c-bdr);
  border-radius:100px;padding:5px 14px;margin-bottom:14px;
  font-size:12px;font-weight:500;color:var(--c);
  font-family:'Roboto Mono',monospace;letter-spacing:.5px;text-transform:uppercase;
}
.hero-pulse{width:6px;height:6px;border-radius:50%;background:var(--c);animation:pulse 2s ease-in-out infinite}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.3}}
h1{
  font-size:36px;font-weight:400;color:var(--text);
  letter-spacing:-.5px;line-height:1.2;margin-bottom:10px;
}
h1 b{font-weight:700}
.hero-sub{font-size:15px;color:var(--text3);line-height:1.6;max-width:560px;margin-bottom:24px}
.hero-stats{display:flex;gap:10px;flex-wrap:wrap}
.hstat{
  background:var(--bg);border:1px solid var(--border);border-radius:var(--r);
  padding:14px 20px;display:flex;flex-direction:column;gap:2px;min-width:110px;
}
.hstat-n{font-size:28px;font-weight:700;color:var(--c);line-height:1}
.hstat-l{font-size:10px;font-weight:500;text-transform:uppercase;letter-spacing:1px;color:var(--text4);margin-top:2px}

/* icon box */
.hero-icon-box{
  width:120px;height:120px;border-radius:24px;
  background:var(--c-lt);border:2px solid var(--c-bdr);
  display:flex;align-items:center;justify-content:center;
  font-size:56px;flex-shrink:0;
  box-shadow:0 4px 20px rgba(0,0,0,.08);
}

/* ‚îÄ‚îÄ SOURCE TAGS STRIP ‚îÄ‚îÄ */
.source-strip{
  background:var(--white);border-bottom:1px solid var(--border);
  padding:14px 32px;
  display:flex;align-items:center;gap:12px;flex-wrap:wrap;
}
.source-label{
  font-size:11px;font-weight:500;text-transform:uppercase;letter-spacing:1px;
  color:var(--text4);font-family:'Roboto Mono',monospace;white-space:nowrap;
}
.source-pills{display:flex;flex-wrap:wrap;gap:5px}
.src-pill{
  font-size:11px;font-family:'Roboto Mono',monospace;
  color:var(--text3);background:var(--bg);
  border:1px solid var(--border);border-radius:4px;padding:2px 8px;
}

/* ‚îÄ‚îÄ TOOLBAR ‚îÄ‚îÄ */
.toolbar{
  max-width:1200px;margin:0 auto;padding:20px 32px 12px;
  display:flex;gap:10px;align-items:center;flex-wrap:wrap;
}
.search-wrap{position:relative;flex:1;min-width:200px;max-width:400px}
.search-icon{position:absolute;left:13px;top:50%;transform:translateY(-50%);color:var(--text4);pointer-events:none}
.search-input{
  width:100%;background:var(--white);border:1px solid var(--border);border-radius:24px;
  padding:9px 16px 9px 40px;font-family:'Roboto',sans-serif;font-size:13px;color:var(--text);outline:none;
  transition:border-color .2s,box-shadow .2s;
}
.search-input::placeholder{color:var(--text4)}
.search-input:focus{border-color:var(--c);box-shadow:0 0 0 3px var(--c-md)}
.filter-chips{display:flex;gap:6px;flex-wrap:wrap}
.chip{
  background:var(--white);border:1px solid var(--border);border-radius:100px;
  padding:6px 14px;font-size:12px;font-weight:500;color:var(--text3);
  cursor:pointer;transition:all .15s;font-family:'Roboto',sans-serif;
}
.chip:hover{border-color:var(--c);color:var(--c);background:var(--c-lt)}
.chip.active{background:var(--c);border-color:var(--c);color:white}
.rc{margin-left:auto;font-size:13px;color:var(--text4);font-family:'Roboto Mono',monospace;white-space:nowrap}
.rc b{color:var(--c)}

/* ‚îÄ‚îÄ STATUS ‚îÄ‚îÄ */
.status-wrap{max-width:1200px;margin:0 auto;padding:12px 32px 0}
.status{
  padding:10px 16px;border-radius:var(--r);font-size:13px;
  font-family:'Roboto Mono',monospace;display:flex;align-items:center;gap:8px;
}
.status.loading{background:#E8F0FE;color:#1565C0;border:1px solid rgba(26,115,232,.2)}
.status.ok{background:#E6F4EA;color:#137333;border:1px solid rgba(19,115,51,.2)}
.status.error{background:#FCE8E6;color:#C5221F;border:1px solid rgba(197,34,31,.2)}

/* ‚îÄ‚îÄ ORG GRID ‚îÄ‚îÄ */
.grid{
  max-width:1200px;margin:0 auto;padding:8px 32px 64px;
  display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:14px;
}

/* ‚îÄ‚îÄ ORG CARD ‚îÄ‚îÄ */
.card{
  background:var(--white);border:1px solid var(--border);
  border-radius:var(--r);padding:0;
  transition:box-shadow .2s,transform .2s;
  animation:fadeUp .3s ease both;
  display:flex;flex-direction:column;overflow:hidden;
}
.card:hover{box-shadow:var(--shadow-h);transform:translateY(-2px)}
@keyframes fadeUp{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}

/* colored left border */
.card{border-left:4px solid var(--c)}

.card-head{
  padding:16px 18px 12px;
  display:flex;align-items:flex-start;gap:12px;
  border-bottom:1px solid var(--border);
}
.card-avatar{
  flex-shrink:0;width:40px;height:40px;border-radius:8px;
  background:var(--c-lt);border:1px solid var(--c-bdr);
  display:flex;align-items:center;justify-content:center;
  font-size:18px;font-weight:700;color:var(--c);
  font-family:'Roboto',sans-serif;
}
.card-head-right{flex:1;min-width:0}
.card-name{
  font-size:15px;font-weight:500;color:var(--text);
  line-height:1.35;margin-bottom:2px;word-break:break-word;
}
.card-name a{color:inherit;text-decoration:none}
.card-name a:hover{color:var(--c);text-decoration:underline}
.card-url{
  font-size:11px;color:var(--text4);font-family:'Roboto Mono',monospace;
  white-space:nowrap;overflow:hidden;text-overflow:ellipsis;
  display:flex;align-items:center;gap:4px;
}
.card-url a{color:var(--text4);text-decoration:none}
.card-url a:hover{color:var(--c)}

.card-body{padding:12px 18px;flex:1}
.card-ctx{
  font-size:13px;color:var(--text2);line-height:1.6;
}
.ctx-label{
  font-size:10px;font-weight:500;text-transform:uppercase;letter-spacing:1px;
  color:var(--text4);margin-bottom:5px;font-family:'Roboto Mono',monospace;
  display:block;
}
.card-foot{
  padding:10px 18px 14px;
  display:flex;align-items:center;justify-content:space-between;
}
.mt-chip{
  font-size:11px;font-weight:500;padding:3px 10px;border-radius:4px;
  font-family:'Roboto Mono',monospace;letter-spacing:.5px;text-transform:uppercase;
}
.mt-tag     {background:#E8F0FE;color:#1A73E8}
.mt-api     {background:#FEF7E0;color:#E37400}
.mt-section {background:#EDE7F6;color:#5E35B1}
.mt-keyword {background:#FCE8E6;color:#C5221F}
.mt-default {background:var(--bg);color:var(--text3)}
.visit-btn{
  display:inline-flex;align-items:center;gap:5px;
  font-size:13px;font-weight:500;color:var(--c);
  background:var(--c-lt);border:1px solid var(--c-bdr);
  border-radius:100px;padding:6px 16px;text-decoration:none;
  transition:all .15s;
}
.visit-btn:hover{background:var(--c);color:white}

.empty{grid-column:1/-1;text-align:center;padding:80px 20px;display:none}
.empty.show{display:block}
.empty-icon{font-size:3rem;margin-bottom:16px}
.empty h3{font-size:18px;font-weight:400;color:var(--text3);margin-bottom:8px}
.empty p{font-size:13px;color:var(--text4)}

/* ‚îÄ‚îÄ FOOTER ‚îÄ‚îÄ */
footer{background:var(--white);border-top:1px solid var(--border);padding:20px 32px;text-align:center}
footer p{font-size:12px;color:var(--text4);line-height:2}
footer a{color:var(--c);text-decoration:none}
footer a:hover{text-decoration:underline}

@media(max-width:768px){
  .hero-inner{grid-template-columns:1fr}.hero-icon-box{display:none}
  .hero-inner,.toolbar,.grid,.source-strip,.status-wrap,.topbar{padding-left:20px;padding-right:20px}
}
</style>
</head>
<body>

<!-- TOP BAR -->
<nav class="topbar">
  <a class="back-btn" href="../index.html">
    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="15 18 9 12 15 6"/></svg>
    All Tags
  </a>
  <div class="topbar-crumb">
    GSoC 2026 &rsaquo; <b id="topbar-name">Loading‚Ä¶</b>
  </div>
  <div class="topbar-count" id="topbar-count" style="display:none"></div>
</nav>

<!-- HERO -->
<section class="hero">
  <div class="hero-color-bar"></div>
  <div class="hero-inner">
    <div>
      <div class="hero-tag" id="hero-tag">
        <span class="hero-pulse"></span>
        <span id="hero-tag-label">Loading</span>
      </div>
      <h1><b id="h1-name">‚Äî</b><br><span id="h1-sub" style="color:var(--text3);font-weight:300">Organizations ¬∑ GSoC 2026</span></h1>
      <p class="hero-sub" id="hero-sub">Organizations participating in Google Summer of Code 2026 tagged with this technology.</p>
      <div class="hero-stats">
        <div class="hstat"><span class="hstat-n" id="stat-orgs">‚Äì</span><span class="hstat-l">Organizations</span></div>
        <div class="hstat"><span class="hstat-n" id="stat-src">‚Äì</span><span class="hstat-l">Source Tags</span></div>
      </div>
    </div>
    <div class="hero-icon-box" id="icon-box">‚ú¶</div>
  </div>
</section>

<!-- SOURCE TAGS -->
<div class="source-strip" id="source-strip" style="display:none">
  <span class="source-label">Merged from</span>
  <div class="source-pills" id="source-pills"></div>
</div>

<!-- STATUS -->
<div class="status-wrap">
  <div class="status loading" id="status">‚è≥ Loading data‚Ä¶</div>
</div>

<!-- TOOLBAR -->
<div class="toolbar" id="toolbar" style="display:none">
  <div class="search-wrap">
    <svg class="search-icon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
    <input class="search-input" id="search" type="text" placeholder="Search organizations‚Ä¶" autocomplete="off">
  </div>
  <div class="filter-chips">
    <button class="chip active" data-f="all">All</button>
    <button class="chip" data-f="tag">Tag match</button>
    <button class="chip" data-f="api">API</button>
    <button class="chip" data-f="section">Section</button>
    <button class="chip" data-f="keyword">Keyword</button>
  </div>
  <div class="rc">showing <b id="showing">0</b></div>
</div>

<!-- GRID -->
<div class="grid" id="grid">
  <div class="empty" id="empty">
    <div class="empty-icon">üîç</div>
    <h3>No results found</h3>
    <p>Try adjusting your search or filter</p>
  </div>
</div>

<footer>
  <p>
    <a href="https://summerofcode.withgoogle.com" target="_blank">Google Summer of Code 2026</a>
    &nbsp;¬∑&nbsp;
    <a href="../index.html">‚Üê Back to all tags</a>
  </p>
</footer>

<script>
/* ‚îÄ‚îÄ TAG METADATA ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
const TAG_META={
  "python":   {tag:"Python",icon:"üêç",color:"#1565C0"},
  "javascript":{tag:"JavaScript",icon:"‚ö°",color:"#F9A825"},
  "c-c":      {tag:"C/C++",icon:"‚öôÔ∏è",color:"#512DA8"},
  "web-backend-full-stack":{tag:"Web Backend & Full Stack",icon:"üåê",color:"#00897B"},
  "developer-tools-qa":{tag:"Developer Tools & QA",icon:"üõ†Ô∏è",color:"#546E7A"},
  "java-jvm": {tag:"Java & JVM",icon:"‚òï",color:"#E64A19"},
  "web-frontend":{tag:"Web Frontend",icon:"üé®",color:"#0097A7"},
  "scripting-other-languages":{tag:"Scripting & Other Languages",icon:"üìú",color:"#7B1FA2"},
  "data-science-analytics":{tag:"Data Science & Analytics",icon:"üìä",color:"#0277BD"},
  "education-humanities":{tag:"Education & Humanities",icon:"üìö",color:"#C62828"},
  "artificial-intelligence":{tag:"Artificial Intelligence",icon:"ü§ñ",color:"#AD1457"},
  "compilers-build-tools":{tag:"Compilers & Build Tools",icon:"üî®",color:"#F57F17"},
  "scientific-computing-hpc":{tag:"Scientific Computing & HPC",icon:"üî¨",color:"#00695C"},
  "cloud-infrastructure":{tag:"Cloud & Infrastructure",icon:"‚òÅÔ∏è",color:"#FF6F00"},
  "containers-kubernetes":{tag:"Containers & Kubernetes",icon:"üê≥",color:"#1565C0"},
  "databases":{tag:"Databases",icon:"üóÑÔ∏è",color:"#1B5E20"},
  "linux-unix":{tag:"Linux & Unix",icon:"üêß",color:"#827717"},
  "open-source-research":{tag:"Open Source & Research",icon:"üîì",color:"#2E7D32"},
  "bioinformatics-health":{tag:"Bioinformatics & Health",icon:"üß¨",color:"#1A6B1A"},
  "mobile-development":{tag:"Mobile Development",icon:"üì±",color:"#1565C0"},
  "devops-ci-cd":{tag:"DevOps & CI/CD",icon:"üîÑ",color:"#B71C1C"},
  "machine-learning":{tag:"Machine Learning",icon:"üß†",color:"#6A1B9A"},
  "security":{tag:"Security",icon:"üîí",color:"#C62828"},
  "desktop-applications":{tag:"Desktop Applications",icon:"üñ•Ô∏è",color:"#1565C0"},
  "go":{tag:"Go",icon:"üêπ",color:"#00838F"},
  "typescript":{tag:"TypeScript",icon:"üìò",color:"#1565C0"},
  "graphics-3d":{tag:"Graphics & 3D",icon:"üéÆ",color:"#880E4F"},
  "mathematics-algorithms":{tag:"Mathematics & Algorithms",icon:"‚àë",color:"#B71C1C"},
  "operating-systems-virtualization":{tag:"Operating Systems & Virtualization",icon:"üíª",color:"#0D47A1"},
  "rust":{tag:"Rust",icon:"ü¶Ä",color:"#BF360C"},
  "physical-earth-sciences":{tag:"Physical & Earth Sciences",icon:"üî≠",color:"#0D47A1"},
  "systems-low-level-languages":{tag:"Systems & Low-level Languages",icon:"üîß",color:"#37474F"},
  "iot-robotics-autonomous-systems":{tag:"IoT, Robotics & Autonomous Systems",icon:"ü§ñ",color:"#004D40"},
  "big-data":{tag:"Big Data",icon:"üåä",color:"#BF360C"},
  "networking":{tag:"Networking",icon:"üåê",color:"#01579B"},
  "audio-video-media":{tag:"Audio, Video & Media",icon:"üéµ",color:"#4A148C"},
  "communications-collaboration":{tag:"Communications & Collaboration",icon:"üí¨",color:"#1B5E20"},
  "generative-ai-llms":{tag:"Generative AI & LLMs",icon:"‚ú®",color:"#880E4F"},
  "mobile-languages":{tag:"Mobile Languages",icon:"üì≤",color:"#01579B"},
  "accessibility-ux":{tag:"Accessibility & UX",icon:"‚ôø",color:"#880E4F"},
  "systems-programming-embedded":{tag:"Systems Programming & Embedded",icon:"üîå",color:"#37474F"},
  "ruby-php":{tag:"Ruby & PHP",icon:"üíé",color:"#B71C1C"},
  "computer-vision-nlp":{tag:"Computer Vision & NLP",icon:"üëÅÔ∏è",color:"#006064"},
  "games-simulation":{tag:"Games & Simulation",icon:"üéÆ",color:"#1B5E20"},
  "gis-geospatial":{tag:"GIS & Geospatial",icon:"üó∫Ô∏è",color:"#1B5E20"},
  "software-composition-compliance":{tag:"Software Composition & Compliance",icon:"üìã",color:"#37474F"},
  "fintech-blockchain":{tag:"Fintech & Blockchain",icon:"üí∞",color:"#E65100"},
  "electronic-design-hardware":{tag:"Electronic Design & Hardware",icon:"üîã",color:"#546E7A"},
};

/* ‚îÄ‚îÄ INIT ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
const params=new URLSearchParams(location.search);
const slug=params.get('slug')||'';
const meta=TAG_META[slug];

if(!meta){
  setStatus('error',`‚ö†Ô∏è Unknown tag: "${slug}"`);
}else{
  applyTheme(meta.color);
  renderHero(meta,slug);
  loadOrgs(slug);
}

function applyTheme(hex){
  const r=document.documentElement;
  r.style.setProperty('--c',hex);
  // derive light/border from hex
  const rgb=hexToRgb(hex);
  r.style.setProperty('--c-lt',`rgba(${rgb},.1)`);
  r.style.setProperty('--c-md',`rgba(${rgb},.12)`);
  r.style.setProperty('--c-bdr',`rgba(${rgb},.3)`);
}
function renderHero(m,slug){
  document.title=`${m.tag} ¬∑ GSoC 2026`;
  document.getElementById('topbar-name').textContent=m.tag;
  document.getElementById('hero-tag-label').textContent=m.tag;
  document.getElementById('h1-name').textContent=m.tag;
  document.getElementById('icon-box').textContent=m.icon;
  document.getElementById('hero-sub').textContent=
    `Organizations participating in Google Summer of Code 2026 tagged with ${m.tag}. Browse, search, and explore.`;
}

/* ‚îÄ‚îÄ LOAD JSON ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
let allOrgs=[];
let activeFilter='all';

function loadOrgs(slug){
  setStatus('loading',`‚è≥ Loading ${slug}.json‚Ä¶`);
  fetch(`../json/${slug}.json`)
    .then(r=>{if(!r.ok)throw new Error(`HTTP ${r.status}`);return r.json()})
    .then(data=>{
      setStatus('ok',`‚úÖ Loaded successfully`);
      setTimeout(()=>document.querySelector('.status-wrap').style.display='none',2000);

      // Try every possible array field name
      allOrgs = data.organizations||data.orgs||data.data||data.results||[];
      if(!Array.isArray(allOrgs)&&typeof allOrgs==='object'){
        allOrgs=Object.values(allOrgs);
      }

      // Source tags from meta ‚Äî try to get from data too
      const srcTags=data.source_tags||[];
      if(srcTags.length){
        const pills=document.getElementById('source-pills');
        pills.innerHTML='';
        srcTags.forEach(s=>{
          const p=document.createElement('span');
          p.className='src-pill';p.textContent=s;pills.appendChild(p);
        });
        document.getElementById('source-strip').style.display='flex';
        document.getElementById('stat-src').textContent=srcTags.length;
      }else{
        document.getElementById('source-strip').style.display='none';
      }

      document.getElementById('stat-orgs').textContent=allOrgs.length;
      document.getElementById('topbar-count').textContent=`${allOrgs.length} orgs`;
      document.getElementById('topbar-count').style.display='';
      document.getElementById('toolbar').style.display='flex';
      render();
    })
    .catch(err=>{
      setStatus('error',`‚ö†Ô∏è Could not load ../json/${slug}.json ‚Äî ${err.message}`);
    });
}

/* ‚îÄ‚îÄ RENDER ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
function render(){
  const q=document.getElementById('search').value.toLowerCase().trim();
  const grid=document.getElementById('grid');
  const empty=document.getElementById('empty');

  const filtered=allOrgs.filter(org=>{
    const rawUrl=getField(org,'url','website','link','gsoc_url','homepage_url')||'';
    const name=slugToName(rawUrl)||getField(org,'name','org_name','organization','title','project_name')||'Unknown Organization';
    const ctx=getContext(org);
    const nameMatch=!q||name.toLowerCase().includes(q);
    const ctxMatch=!q||ctx.toLowerCase().includes(q);
    if(!nameMatch&&!ctxMatch)return false;
    if(activeFilter==='all')return true;
    const mt=(org.match_type||'').toLowerCase();
    if(activeFilter==='tag')    return mt.includes('tag');
    if(activeFilter==='api')    return mt.includes('api');
    if(activeFilter==='section')return mt.includes('section');
    if(activeFilter==='keyword')return mt.includes('keyword')||mt.includes('language')||mt.includes('match');
    return true;
  });

  document.getElementById('showing').textContent=filtered.length;
  [...grid.querySelectorAll('.card')].forEach(c=>c.remove());
  if(!filtered.length){empty.classList.add('show');return}
  empty.classList.remove('show');

  filtered.forEach((org,i)=>{
    const url=getField(org,'url','website','link','gsoc_url','homepage_url')||'#';
    const name=slugToName(url)||getField(org,'name','org_name','organization','title','project_name')||'Unknown Organization';
    const ctx=getContext(org);
    const mt=(org.match_type||'').toLowerCase();
    const initial=name.trim()[0]?.toUpperCase()||'?';

    // Match type chip styling
    let chipCls='mt-default';
    let chipLbl=org.match_type||'match';
    if(mt.includes('tag'))   {chipCls='mt-tag';   chipLbl='Tag match'}
    else if(mt.includes('api')){chipCls='mt-api';  chipLbl='API match'}
    else if(mt.includes('sec')){chipCls='mt-section';chipLbl='Section match'}
    else if(mt.length)        {chipCls='mt-keyword';chipLbl=org.match_type}

    // Clean URL for display
    let displayUrl='';
    try{displayUrl=new URL(url).hostname.replace('www.','')}catch(e){displayUrl=url}

    const card=document.createElement('div');
    card.className='card';
    card.style.animationDelay=`${Math.min(i*25,500)}ms`;
    card.innerHTML=`
      <div class="card-head">
        <div class="card-avatar">${esc(initial)}</div>
        <div class="card-head-right">
          <div class="card-name"><a href="${esc(url)}" target="_blank" rel="noopener">${esc(name)}</a></div>
          ${url&&url!=='#'?`<div class="card-url">
            <svg width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>
            <a href="${esc(url)}" target="_blank" rel="noopener">${esc(displayUrl)}</a>
          </div>`:''}
        </div>
      </div>
      ${ctx?`<div class="card-body">
        <span class="ctx-label">Tech Context</span>
        <div class="card-ctx">${esc(ctx.slice(0,240))}${ctx.length>240?'‚Ä¶':''}</div>
      </div>`:''}
      <div class="card-foot">
        <span class="mt-chip ${chipCls}">${esc(chipLbl)}</span>
        <a class="visit-btn" href="${esc(url)}" target="_blank" rel="noopener">
          Visit org
          <svg width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><line x1="7" y1="17" x2="17" y2="7"/><polyline points="7 7 17 7 17 17"/></svg>
        </a>
      </div>`;
    grid.appendChild(card);
  });
}

/* ‚îÄ‚îÄ HELPERS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
function slugToName(url){
  try{
    const parts=new URL(url).pathname.replace(/\/+$/,'').split('/');
    const slug=parts[parts.length-1];
    if(!slug)return null;
    // Convert "pecan-project" ‚Üí "Pecan Project"
    return slug.split('-').map(w=>w.charAt(0).toUpperCase()+w.slice(1)).join(' ');
  }catch(e){return null}
}
function getField(obj,...keys){
  for(const k of keys){if(obj[k]!=null&&obj[k]!=='')return obj[k]}
  return null;
}
function getContext(org){
  // Try all possible field names
  let ctx=getField(org,'tech_context','context','description','technologies','matched_text','tech','summary');
  if(!ctx)return '';
  // Strip literal "" or '' artifacts from JSON.stringify fallbacks
  ctx=String(ctx).trim();
  if(ctx==='"\"'||ctx==='""'||ctx==="''"||ctx==='{}'||ctx==='[]'||ctx==='null')return '';
  return ctx;
}
function setStatus(type,msg){
  const el=document.getElementById('status');
  el.className='status '+type;el.textContent=msg;
}
function esc(s){return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;')}
function hexToRgb(hex){
  const r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
  return r?`${parseInt(r[1],16)},${parseInt(r[2],16)},${parseInt(r[3],16)}`:'26,115,232';
}

document.getElementById('search').addEventListener('input',render);
document.querySelectorAll('.chip').forEach(c=>c.addEventListener('click',()=>{
  document.querySelectorAll('.chip').forEach(x=>x.classList.remove('active'));
  c.classList.add('active');activeFilter=c.dataset.f;render();
}));
</script>
</body>
</html>